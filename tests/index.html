<!DOCTYPE html>
<html lang="en"> 
<head> 
  <meta charset="utf-8" /> 
  <title>document.write Image Loader - Tests</title>
  <link rel="stylesheet" href="qunit-2.0.1.css">
  <script src="qunit-2.0.1.js"></script>

  <script type="text/javascript">

    var d = new Date();
    var mon = d.getMonth() + 1;
    var day = d.getDate();
	var hours = d.getHours();
	var minutes = d.getMinutes();
	var seconds = d.getSeconds();
    
    var date_string = ""
    date_string += d.getFullYear();
    date_string += (mon < 10 ? '0' : ''); 
    date_string += mon;
    date_string += (day < 10 ? '0' : '');
    date_string += day;
    date_string += (hours < 10 ? '0' : '');
	date_string += hours; 
    date_string += (minutes < 10 ? '0' : '');
	date_string += minutes; 
    date_string += (seconds < 10 ? '0' : '');
	date_string += seconds; 

	// TODO: Find a better way to do cache busting.
	var script_call = '';
	script_call += '<script src="';
	script_call += '../document-write-image-loader-0-5-x/document-write-image-loader.js';
	script_call += '?cache_buster=';
	script_call += date_string;
	script_call += '">';
	script_call += '</';
	script_call += 'script>';
	document.writeln(script_call);

	var tests_call = '';
	tests_call += '<script src="';
	tests_call += 'document-write-image-loader-0-5-x-tests.js';
	tests_call += '?cache_buster=';
	tests_call += date_string;
	tests_call += '">';
	tests_call += '</';
	tests_call += 'script>';
	document.writeln(tests_call);

  </script>


  <style type="text/css">
    body { font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; }
  </style>
</head> 
<body>
  <p><strong><a href="../">Example</a> &middot; QUnit Test Results &middot; <a href="https://github.com/alanwsmith/doc-write-image-loader">Documentation and GitHub Repo</a></strong></p>
  <hr>
  <h1>document.write Image Loader - Tests</h1>

  <script type="text/javascript">
    var imageLoader = new ImageLoader_0_5_x;

    imageLoader._dpr = 2;
    imageLoader._viewport_width = 640;
    imageLoader._viewport_height = 480;

    imageLoader._alt_text = "Photo of Horses";
    imageLoader._filename = "horses.jpg";
    imageLoader._percent_of_viewport_width = 20;
    imageLoader._raw_source_height = 107;
    imageLoader._raw_source_width = 160;
    imageLoader._url_template = '//res.cloudinary.com/demo/image/upload/w_[PHYSICAL_WIDTH],h_[PHYSICAL_HEIGHT]/[FILENAME]';

    var function_names = [
        'viewport_width',
        'viewport_height',
        'percent_of_viewport_width',
        'raw_source_dpr_max_logical_width',  
        'raw_source_width',
        'logical_width',  
        'physical_width_to_call',  
        'raw_source_height',
        'logical_height',  
        'physical_height_to_call',  
    ];

    for (var i = 0, len = function_names.length; i < len; i = i + 1) {
        console.log(function_names[i] + ": " + imageLoader[function_names[i]]()); 
    }

    console.log(
        "raw_physical_max_width > physical_width_to_call_to_call"
        +
        " ? TKTKTKTK"
    );


    var result = imageLoader.img_tag_string();
    document.write(result);

  </script>

  <div id="qunit"></div>
</body>
</html>
